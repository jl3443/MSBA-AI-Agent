<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Test MSBA Button</title>
    <style>
        body {
            padding: 50px;
            font-family: Arial, sans-serif;
        }
        .instructions {
            background: #FFF9E6;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #FFD100;
            margin-bottom: 20px;
        }
        button {
            padding: 10px 20px;
            background: #003DA5;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>
<body>
    <h1>ğŸ“ MSBA Agent Button Test</h1>
    
    <div class="instructions">
        <h3>æµ‹è¯•æ­¥éª¤ï¼š</h3>
        <ol>
            <li>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰</li>
            <li>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®åˆ›å»ºæµ®åŠ¨æŒ‰é’®</li>
            <li>æŸ¥çœ‹å³ä¸‹è§’æ˜¯å¦å‡ºç°è“è‰² ğŸ“ æŒ‰é’®</li>
            <li>ç‚¹å‡»æŒ‰é’®æµ‹è¯•æ˜¯å¦èƒ½æ‰“å¼€ä¾§è¾¹æ </li>
        </ol>
    </div>
    
    <button onclick="createButton()">åˆ›å»ºæµ®åŠ¨æŒ‰é’®</button>
    <button onclick="checkButton()">æ£€æŸ¥æŒ‰é’®æ˜¯å¦å­˜åœ¨</button>
    <button onclick="initAgent()">åˆå§‹åŒ– Agent</button>
    
    <script>
        function createButton() {
            // Remove existing button
            const existing = document.getElementById('msba-toggle-btn');
            if (existing) {
                existing.remove();
            }
            
            const btn = document.createElement('button');
            btn.id = 'msba-toggle-btn';
            btn.innerHTML = 'ğŸ“';
            btn.title = 'Toggle MSBA AI Assistant';
            btn.style.cssText = `
                position: fixed !important;
                right: 20px !important;
                bottom: 20px !important;
                width: 60px !important;
                height: 60px !important;
                background: #003DA5 !important;
                color: white !important;
                border: none !important;
                border-radius: 50% !important;
                font-size: 24px !important;
                cursor: pointer !important;
                box-shadow: 0 4px 12px rgba(0, 61, 165, 0.3) !important;
                z-index: 999999 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            `;
            
            btn.onclick = () => {
                alert('æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼å¦‚æœ Agent å·²åˆå§‹åŒ–ï¼Œåº”è¯¥ä¼šæ‰“å¼€ä¾§è¾¹æ ã€‚');
                if (window.msbaAgent) {
                    window.msbaAgent.toggleSidebar();
                }
            };
            
            document.body.appendChild(btn);
            console.log('âœ… æŒ‰é’®å·²åˆ›å»ºï¼');
            alert('æŒ‰é’®å·²åˆ›å»ºï¼æŸ¥çœ‹å³ä¸‹è§’ã€‚');
        }
        
        function checkButton() {
            const btn = document.getElementById('msba-toggle-btn');
            if (btn) {
                const rect = btn.getBoundingClientRect();
                console.log('æŒ‰é’®ä¿¡æ¯:', {
                    exists: true,
                    position: { right: window.innerWidth - rect.right, bottom: window.innerHeight - rect.bottom },
                    size: { width: rect.width, height: rect.height },
                    visible: rect.width > 0 && rect.height > 0,
                    zIndex: window.getComputedStyle(btn).zIndex
                });
                alert('æŒ‰é’®å­˜åœ¨ï¼ä½ç½®: å³ä¸‹è§’ ' + (window.innerWidth - rect.right) + 'px, ' + (window.innerHeight - rect.bottom) + 'px');
            } else {
                console.log('æŒ‰é’®ä¸å­˜åœ¨');
                alert('æŒ‰é’®ä¸å­˜åœ¨ï¼è¯·å…ˆç‚¹å‡»"åˆ›å»ºæµ®åŠ¨æŒ‰é’®"');
            }
        }
        
        function initAgent() {
            if (typeof MSBAAgent !== 'undefined') {
                window.msbaAgent = new MSBAAgent();
                alert('Agent å·²åˆå§‹åŒ–ï¼');
            } else {
                alert('MSBAAgent ç±»æœªå®šä¹‰ã€‚è¯·ç¡®ä¿æ‰©å±•å·²åŠ è½½ã€‚');
            }
        }
    </script>
</body>
</html>

